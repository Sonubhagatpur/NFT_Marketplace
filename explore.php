<?php include 'header.php'; ?>

<!-- Breadcrumbs Section Start -->
<div class="bithu-breadcrumbs-section" id="home">
    <div class="container">
        <div class="row">
            <div class="col-lg-5">
                <div class="breadcrumbs-area sec-heading">
                    <div class="sub-inner mb-15">
                        <a class="breadcrumbs-link" href="index.php">Home</a><span class="sub-title"> Explore</span>
                        <img class="heading-left-image" src="assets/images/icon/home-shape.png" alt="Steps-Image" />
                    </div>
                    <h2><a class="title" href="#">Explore</a></h2>
                </div>
            </div>

            <!-- <div class="col-lg-7 breadcrumbs-form md-mt-40">
                <form>
                    <input type="text" id="Search" name="search" placeholder="Search by articles , categories">
                    <span class="submit"><i class="icon-search"></i><input type="submit"></span>
                </form>
            </div> -->
        </div>
    </div>
</div>
<!-- Breadcrumbs Section End -->


<!-- collections Section Start -->
<div class="collections-body-section pt-100 pb-140">
    <div class="container">
        <div class="collections-body-inner">
            <div class="row">
                <!-- <div class="col-lg-3 col-md-4">
                    <div class="collections-body-left">
                        <form>
                            <div class="collections-price-filter">
                                <select name="PriceFilter">
                                    <option value="LowHigh" selected>Price: Low to High</option>
                                    <option value="HighLow">Price: High to Low</option>
                                    <option value="recentlyListed">Recently Listed</option>
                                    <option value="Favorited">Most Favorited</option>
                                    <option value="Favorited">Oldest</option>
                                </select>
                            </div>
                            <div class="collections-filter-checkbox-collaps">
                                <div class="collapsible active">
                                    <button type="button">Background</button>
                                    <div class="content">
                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Blue <span>(23)</span>
                                                <input type="checkbox" checked="checked">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Green <span>(13)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Pink <span>(18)</span>
                                                <input type="checkbox" checked="checked">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Red <span>(24)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Rainbow <span>(8)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Yellow <span>(288)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="collections-filter-checkbox-collaps">
                                <div class="collapsible active">
                                    <button type="button">Clothes</button>
                                    <div class="content">
                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Denim <span>(78)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Black Hoodie <span>(35)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Sushi <span>(22)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Hawaii Shirt <span>(9)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="collections-filter-checkbox-collaps">
                                <div class="collapsible active">
                                    <button type="button">Face</button>
                                    <div class="content">
                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Pretty <span>(105)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">happy Smile <span>(78)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Blushing <span>(52)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Yummy <span>(43)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="collections-filter-checkbox-collaps">
                                <div class="collapsible active">
                                    <button type="button">Eye</button>
                                    <div class="content">
                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Pretty <span>(105)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">happy Smile <span>(78)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Blushing <span>(52)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>

                                        <div class="collections-filter-checkbox">
                                            <label class="checkboxContainer">Yummy <span>(43)</span>
                                                <input type="checkbox">
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div> -->
                <div class="col-lg-12 col-md-12">
                    <div class="collections-body-right">
                        <div class="row exploreItems">
                        </div>
                        <div class="gamfi-navigation">
                            <ul>
                                <li><a href="#"><i class="icon-Vector"></i></a></li>
                                <li><a href="#">1</a></li>
                                <li><a class="active" href="#">2</a></li>
                                <li><a href="#">3</a></li>
                                <li><a href="#">4</a></li>
                                <li><a href="#"><i class="icon-arrow_right"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- collections Section End -->

<!--  Footer Start -->
<div class="bithu_v1_footer_sect footer-sec1">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="bithu_title_section">
                    <h3>Join Our community & get Early access</h3>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="join_comunity_btns list-btn">
                    <button class="wishlist_btn hov_shape_show">
                        <img src="assets/images/blog/black-img.png" alt="" />Collections
                        <span class="hov_shape1"><img src="assets/images/icon/hov_shape_L_dark.svg" alt="" /></span>
                        <span class="hov_shape2"><img src="assets/images/icon/hov_shape_L_dark.svg" alt="" /></span>
                        <span class="square_hov_shape_dark"></span>
                    </button>
                    <button class="join_discord_btn hov_shape_show">
                        <img src="assets/images/icon/dis_logo.svg" alt="" />Join Discord
                        <span class="hov_shape1"><img src="assets/images/icon/hov_shape_L.svg" alt="" /></span>
                        <span class="hov_shape2"><img src="assets/images/icon/hov_shape_L.svg" alt="" /></span>
                        <span class="square_hov_shape_dark"></span>
                    </button>
                </div>
            </div>
        </div>
        <div class="star-image">
            <div class="star-1 rotated-style"><img src="assets/images/icon/star_6.svg" alt="" /></div>
            <div class="star-2 rotated-style"><img src="assets/images/icon/star_3.svg" alt="" /></div>
            <div class="star-3 rotated-style"><img src="assets/images/icon/star_1.svg" alt="" /></div>
            <div class="star-4 rotated-style"><img src="assets/images/icon/star_7.svg" alt="" /></div>
            <div class="star-5 rotated-style"><img src="assets/images/icon/star_4.svg" alt="" /></div>
            <div class="star-6 rotated-style"><img src="assets/images/icon/star_2.svg" alt="" /></div>
            <div class="star-7 rotated-style"><img src="assets/images/icon/star_5.svg" alt="" /></div>
        </div>
    </div>
</div>
<script>

    $(document).ready(function () {
        explore();
    });

    async function explore() {
        let wallet_address = sessionStorage.getItem("wallet_address");
        const baseURI = await contractInstance.methods.baseURI().call();
        const totalSupply = await contractInstance.methods.totalSupply().call();

        let html = "";
        for (let i = 1; i < Number(totalSupply); i++) {
            const activeId = await contractInstance.methods.NftInfo(i).call();
            const price = web3.utils.fromWei(activeId.price, "ether");
            const data = await fetch(`https://ipfs.io/ipfs/${baseURI.substr(7)}${i}.json`)
            const json = await data.json();
            const images = `http://ipfs.io/ipfs/${(json.image).substr(7)}`;
            const likeData = await getLike('get', i);
            const likeUsers = await getLike('love', i, selectedAccount);
            let newClass = "";
            if (likeUsers != "" && likeUsers != null) {
                if (selectedAccount == likeUsers.User_address) {
                    newClass = "text-danger";
                }
            }
            const total_like = likeData.total_like;
            html += `<div class="col-lg-3 col-sm-6">
            <a href="./buy-description.php?id=${i}">
                                <div class="collections-product-card">
                                    <div class="collections-product-img">
                                        <span><img src="${images}" alt="img"
                                                class="img-fluid" /></span>
                                    </div>
                                    <div class="collections-product-info">
                                        <h6>${json.name}</h6>
                                        </a>
                                        <p><span>${price} ${currency}</span> <span><i id="love${i}" class="fa-regular fa-heart ${newClass}" onclick="like(${i},'${json.name}','${images}')"></i><span id="count${i}"> ${total_like}</span></span>
                                        </p>
                                    </div>
                                </div>
                            </div>`;
            document.querySelector('.exploreItems').innerHTML = html;
        }
    }

    async function like(NFT_id, NFT_name, NFT_image) {
        let total = document.getElementById(`count${NFT_id}`).innerHTML;
        let element = document.getElementById(`love${NFT_id}`);
        let newClass = "text-danger";
        if (selectedAccount != "") {
            const likeUsers = await getLike('love', NFT_id, selectedAccount);
            if (likeUsers != "" && likeUsers != null) {
                element.classList.remove(newClass)
                document.getElementById(`count${NFT_id}`).innerHTML = Number(total) - 1;
            } else {
                element.classList.add(newClass)
                document.getElementById(`count${NFT_id}`).innerHTML = Number(total) + 1;
            }
            await saveLike('save', NFT_id, NFT_name, selectedAccount, NFT_image);
        }
    }

</script>



<?php include 'footer.php'; ?>